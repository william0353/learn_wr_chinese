<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>汉字学习 - 首页</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  <!-- Vue.js -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  
  <style>
    @font-face {
      font-family: 'kai';
      src: url('kai.ttf') format('truetype');
    }

    .chinese-text {
      font-family: 'kai', sans-serif;
    }

    .hero-section {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 100px 0;
    }

    .feature-card {
      transition: transform 0.3s ease;
      height: 100%;
      border: none;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
    }

    .feature-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .stats-section {
      background-color: #f8f9fa;
      padding: 60px 0;
    }

    .stat-number {
      font-size: 3rem;
      font-weight: bold;
      color: #007bff;
    }

    .course-card {
      transition: all 0.3s ease;
      cursor: pointer;
      border-left: 5px solid #007bff;
    }

    .course-card:hover {
      border-left-color: #0056b3;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .lesson-badge {
      background: linear-gradient(45deg, #007bff, #0056b3);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-weight: bold;
    }
  </style>
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand chinese-text" href="index.html">汉字学习</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link active" href="index.html">首页</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="learn.html">学习</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="exam.html">测试</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="sheet.html">练习册</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="usage_guide.html">使用说明</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="data_manager.html">数据管理</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero-section text-center">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h1 class="display-4 fw-bold chinese-text mb-4">汉字学习平台</h1>
          <p class="lead mb-4">
            我们根据国家出版局抽样统计，把汉语中最常见的1000个字按照难易程度，结合国内小学语文课程，分成了五个阶段。
          </p>
          <p class="mb-4">通过由易到难循序渐进，建立孩子对汉语的信心，以及自学的动力。</p>
          <div class="d-grid gap-2 d-sm-flex justify-content-sm-center mb-3">
            <a href="learn.html" class="btn btn-light btn-lg px-4 me-sm-3">
              <i class="bi bi-book"></i> 开始学习
            </a>
            <a href="exam.html" class="btn btn-outline-light btn-lg px-4">
              <i class="bi bi-clipboard-check"></i> 快速测试
            </a>
          </div>
          <div class="text-center">
            <a href="usage_guide.html" class="btn btn-link text-light">
              <i class="bi bi-question-circle"></i> 查看使用说明
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <div id="app">
    <section class="py-5">
      <div class="container">
        <div class="row text-center mb-5">
          <div class="col-md-12">
            <h2 class="chinese-text">主要功能</h2>
            <p class="text-muted">为孩子提供全方位的汉字学习体验</p>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4 mb-4">
            <div class="card feature-card text-center p-4">
              <div class="feature-icon text-primary">
                <i class="bi bi-book-half"></i>
              </div>
              <h5 class="chinese-text">分课学习</h5>
              <p class="text-muted">按照课程系统学习汉字，每课包含图片、发音和拼音，循序渐进掌握汉字知识。</p>
              <a href="learn.html" class="btn btn-outline-primary">开始学习</a>
            </div>
          </div>
          <div class="col-md-4 mb-4">
            <div class="card feature-card text-center p-4">
              <div class="feature-icon text-success">
                <i class="bi bi-clipboard2-check"></i>
              </div>
              <h5 class="chinese-text">智能测试</h5>
              <p class="text-muted">根据学习进度生成听写测试，帮助巩固记忆，跟踪学习效果。</p>
              <a href="exam.html" class="btn btn-outline-success">开始测试</a>
            </div>
          </div>
          <div class="col-md-4 mb-4">
            <div class="card feature-card text-center p-4">
              <div class="feature-icon text-info">
                <i class="bi bi-grid-3x3-gap"></i>
              </div>
              <h5 class="chinese-text">练习册生成</h5>
              <p class="text-muted">生成可打印的田字格练习册，让孩子练习汉字书写，提高写字技能。</p>
              <a href="sheet.html" class="btn btn-outline-info">生成练习册</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Stats Section -->
    <section class="stats-section">
      <div class="container">
        <div class="row text-center">
          <div class="col-md-3 mb-4">
            <div class="stat-number">{{ totalLessons }}</div>
            <p class="text-muted">课程数量</p>
          </div>
          <div class="col-md-3 mb-4">
            <div class="stat-number">{{ totalWords }}</div>
            <p class="text-muted">汉字总数</p>
          </div>
          <div class="col-md-3 mb-4">
            <div class="stat-number">{{ completedExams }}</div>
            <p class="text-muted">完成测试</p>
          </div>
          <div class="col-md-3 mb-4">
            <div class="stat-number">{{ studyDays }}</div>
            <p class="text-muted">学习天数</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Memory Curve Explanation -->
    <section class="py-5 bg-light">
      <div class="container">
        <div class="row">
          <div class="col-md-10 mx-auto text-center">
            <h2 class="chinese-text mb-4">
              <i class="bi bi-graph-up"></i> 智能记忆曲线算法
            </h2>
            <p class="lead text-muted mb-4">
              本系统采用科学的记忆曲线算法，根据每个汉字的学习历史智能安排复习时机，提高学习效率。
            </p>
            <div class="row">
              <div class="col-md-4 mb-3">
                <div class="card h-100">
                  <div class="card-body">
                    <i class="bi bi-clock-history text-primary mb-3" style="font-size: 2rem;"></i>
                    <h5>遗忘曲线跟踪</h5>
                    <p class="text-muted">系统记录每个汉字的学习时间和答题结果，计算遗忘概率。</p>
                  </div>
                </div>
              </div>
              <div class="col-md-4 mb-3">
                <div class="card h-100">
                  <div class="card-body">
                    <i class="bi bi-target text-success mb-3" style="font-size: 2rem;"></i>
                    <h5>智能推荐</h5>
                    <p class="text-muted">优先推荐容易遗忘的汉字进行复习，避免无效重复。</p>
                  </div>
                </div>
              </div>
              <div class="col-md-4 mb-3">
                <div class="card h-100">
                  <div class="card-body">
                    <i class="bi bi-graph-up-arrow text-info mb-3" style="font-size: 2rem;"></i>
                    <h5>动态调整</h5>
                    <p class="text-muted">根据答题表现动态调整每个汉字的记忆参数和复习频率。</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="alert alert-warning mt-4">
              <i class="bi bi-exclamation-triangle"></i>
              <strong>数据存储说明：</strong>
              所有学习数据（包括学习进度、记忆参数、测试历史）均保存在您的设备本地。
              如果更换设备或清理浏览器缓存，将会丢失所有学习进度和记忆参数。
              建议定期使用同一设备进行学习以保持数据连续性。
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Course Overview -->
    <section class="py-5">
      <div class="container">
        <div class="row">
          <div class="col-md-12 text-center mb-5">
            <h2 class="chinese-text">课程概览</h2>
            <p class="text-muted">快速浏览所有课程内容</p>
          </div>
        </div>
        <div class="row">
          <div v-for="(lesson, index) in displayLessons" :key="lesson.id" class="col-md-6 col-lg-4 mb-3">
            <div class="card course-card h-100" @click="goToLesson(lesson.id)">
              <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-2">
                  <span class="lesson-badge">第{{ lesson.id + 1 }}课</span>
                  <small class="text-muted">{{ lesson.words.length }}个字</small>
                </div>
                <h6 class="card-title chinese-text">
                  <span v-for="(word, wordIndex) in lesson.words" :key="wordIndex" class="me-2">
                    {{ word }}
                  </span>
                </h6>
              </div>
            </div>
          </div>
        </div>
        <div class="text-center mt-4" v-if="lessons.length > displayLessons.length">
          <button @click="showMoreLessons" class="btn btn-outline-primary">
            显示更多课程 ({{ lessons.length - displayLessons.length }} 个)
          </button>
        </div>
      </div>
    </section>
  </div>

  <!-- Footer -->
  <footer class="bg-dark text-light py-4">
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <h5 class="chinese-text">汉字学习平台</h5>
          <p class="text-muted">帮助孩子轻松学习汉字，培养中文兴趣。</p>
        </div>
        <div class="col-md-6 text-end">
          <p class="text-muted mb-0">© 2024 汉字学习平台. All rights reserved.</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  
  <script>
    const { createApp } = Vue;

    createApp({
      data() {
        return {
          lessons: [],
          totalWords: 0,
          displayCount: 12,
          completedExams: 0,
          studyDays: 1
        }
      },
      computed: {
        totalLessons() {
          return this.lessons.length;
        },
        displayLessons() {
          return this.lessons.slice(0, this.displayCount);
        }
      },
      async mounted() {
        await this.loadData();
        this.loadStats();
      },
      methods: {
        async loadData() {
          try {
            // 加载课程索引
            const response = await fetch('data/lesson_index.json');
            this.lessons = await response.json();
            
            // 计算总汉字数
            this.totalWords = this.lessons.reduce((total, lesson) => {
              return total + lesson.words.length;
            }, 0);
          } catch (error) {
            console.error('数据加载失败:', error);
            // 使用示例数据
            this.lessons = [
              { id: 0, words: ['人', '十', '火', '米'] },
              { id: 1, words: ['日', '水', '山', '云'] },
              { id: 2, words: ['木', '土', '口', '手'] },
              { id: 3, words: ['大', '小', '上', '下'] },
              { id: 4, words: ['中', '文', '字', '学'] }
            ];
            this.totalWords = this.lessons.reduce((total, lesson) => {
              return total + lesson.words.length;
            }, 0);
          }
        },
        loadStats() {
          // 从本地存储加载统计数据
          const examHistory = JSON.parse(localStorage.getItem('examHistory') || '[]');
          this.completedExams = examHistory.length;
          
          // 计算学习天数（简单示例）
          const firstVisit = localStorage.getItem('firstVisit');
          if (!firstVisit) {
            localStorage.setItem('firstVisit', new Date().toISOString());
            this.studyDays = 1;
          } else {
            const daysDiff = Math.ceil((new Date() - new Date(firstVisit)) / (1000 * 60 * 60 * 24));
            this.studyDays = Math.max(1, daysDiff);
          }
        },
        showMoreLessons() {
          this.displayCount = this.lessons.length;
        },
        goToLesson(lessonId) {
          window.location.href = `learn.html?lesson=${lessonId}`;
        }
      }
    }).mount('#app');
  </script>
</body>

</html>
